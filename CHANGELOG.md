# 更新日志

## [2.0.6] - 2024-03-15

### 修复
- 修复飞书机器人签名生成算法实现错误

## [2.0.5] - 2024-03-15

### 修复
- 修复飞书机器人签名生成错误的问题

## [2.0.4] - 2024-03-21

### 新增
- 添加飞书机器人支持
  - 支持飞书消息签名验证
  - 支持飞书富文本消息格式
  - 支持飞书 @ 功能
  - 支持文件消息和图片消息处理

### 优化
- 优化消息发送逻辑
- 改进错误处理机制
- 完善日志记录

## [2.0.3] - 2025-03-15

### 改进
- 更新了所有版本的发布日期，保持版本历史的连续性和一致性
- 优化了版本号管理，确保版本号递增的合理性

## [2.0.2] - 2025-03-14

### 新增
- 为钉钉通知添加开关控制功能
  - 在配置文件中新增 `enabled` 字段，用于控制是否发送钉钉消息
  - 优化了钉钉消息发送的错误日志

### 修复
- 修复了编译错误：移除了未使用的 context 包导入
- 优化了代码导入结构，删除了不必要的依赖

## [2.0.1] - 2025-03-13

### 新增功能
- 增加 HarmonyOS_MeoW 通知支持
  - 支持多用户 ID 配置
  - 支持自定义 API 基础 URL
  - 支持图片消息处理
  - 支持消息跳转链接
- 优化图片处理逻辑
  - 支持 S3 存储图片
  - 自动选择最佳图片质量

### 优化
- 改进消息处理流程，支持多通知渠道
- 优化配置文件结构，增加 HarmonyOS_MeoW 配置部分
- 改进错误处理和日志记录

## [2.0.0] - 2025-03-12

### 新增功能
- 增加 iOS Bark 通知支持
  - 支持多设备推送
  - 自定义通知声音
  - 自定义通知图标
  - 按聊天分组通知
- 增加聊天记录存储功能
  - 保存历史消息
  - 支持按时间查询
  - 支持按用户查询
- 增加 RPM 和 DEB 包安装支持
- 增加 systemd 和 SysV init 服务管理
- 增加队列指标收集，便于对接 Prometheus 监控
- 增加 HTTP 接口暴露队列指标数据

### 优化
- 重构消息处理流程，支持多目标转发
- 优化配置文件结构，增加更多配置选项
- 优化错误处理和日志记录
- 优化文档和安装说明
- 优化代码结构，增加模块化设计

### 修复
- 修复聊天记录存储初始化失败问题
- 修复配置文件路径问题
- 修复消息队列持久化问题
- 修复网络超时处理问题

## [1.0.5] - 2024-03-21

### 新增
- 添加飞书机器人支持
- 支持飞书消息签名验证
- 支持飞书富文本消息格式
- 支持飞书 @ 功能

### 优化
- 优化消息发送逻辑
- 改进错误处理机制

## [1.0.4] - 2025-03-11

### 改进
- 添加 HTTP 服务暴露队列指标数据
- 提供 `/metrics` 接口返回 JSON 格式指标
- 提供 `/health` 接口用于健康检查
- 支持配置 HTTP 服务端口和路径
- 新增 HTTPS 支持和 HTTP 接口认证机制
- 新增更多队列监控指标
- 改进配置文件管理

## [1.0.3] - 2025-03-11

### 改进
- 添加队列指标收集功能
- 支持每分钟统计队列状态
- 支持将指标输出到 JSON 文件
- 为对接 Prometheus 监控做准备

## [1.0.2] - 2025-03-10

### 改进
- 添加 systemd 服务支持
- 添加 SysV init 服务脚本
- 添加 RPM 和 DEB 打包支持
- 优化 Linux 系统部署流程

## [1.0.1] - 2025-03-10

### 改进
- 优化错误处理逻辑
- 改进日志输出格式
- 增强网络超时检测

## [1.0.0] - 2025-03-10

### 新增
- 初始版本发布
- 支持监听 Telegram 群聊消息
- 支持转发消息到钉钉机器人
- 支持处理网络超时和错误情况
- 支持消息重试机制
- 支持内存队列和 LevelDB 持久化队列
- 支持程序重启后恢复失败消息

## [2.0.7] - 2024-03-15

### 修复
- 修复飞书机器人签名验证方式，将签名和时间戳从 Header 移至请求体中

## [2.0.8] - 2024-03-15

### 修复
- 完全重写飞书机器人消息发送逻辑
  - 修复签名生成算法
  - 更新消息结构以符合飞书API要求
  - 优化文本消息和@功能的实现

## [2.0.9] - 2024-03-15

### 修复
- 修复飞书机器人图片消息发送问题
  - 确保图片消息包含必要的文本内容
  - 优化图片消息的显示格式

## [2.0.10] - 2024-03-15

### 修复
- 修复飞书机器人消息格式问题
  - 更新为正确的富文本消息格式
  - 修复文件和图片消息的显示方式
  - 优化 @ 功能的实现

## [2.0.11] - 2024-03-15

### 优化
- 优化飞书机器人消息格式
  - 使用群组名或用户名作为消息标题
  - 优化图片和文件消息的显示文本
  - 完善消息结构以符合飞书API规范